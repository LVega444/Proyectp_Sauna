<UserControl x:Class="ProyectoSauna.UserControlInventario"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             Background="#0F1117">

    <Grid Margin="40">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ======= TÍTULO ======= -->
        <StackPanel Grid.Row="0" Margin="0,0,0,25" HorizontalAlignment="Center">
            <TextBlock Text="🧾 Inventario de Productos"
                       FontSize="30"
                       FontWeight="Bold"
                       Foreground="#00E5FF"
                       TextAlignment="Center"/>
            <TextBlock Text="Gestión y control del stock del negocio"
                       FontSize="14"
                       Foreground="#A0A8C0"
                       TextAlignment="Center"
                       Margin="0,4,0,0"/>
        </StackPanel>

        <!-- ======= FILTROS ======= -->
        <Border Grid.Row="1"
                Padding="18"
                CornerRadius="10"
                Background="#161922"
                Margin="0,0,0,20"
                Effect="{DynamicResource MaterialDesignElevation2}">
            <DockPanel LastChildFill="False" HorizontalAlignment="Center">
                <!-- Buscar -->
                <StackPanel Orientation="Horizontal" Margin="0,0,25,0">
                    <TextBlock Text="🔎 Buscar:"
                               VerticalAlignment="Center"
                               Foreground="#E0E4EB"
                               Margin="0,0,10,0"
                               FontSize="15"/>
                    <TextBox x:Name="txtBuscar"
                             Width="210"
                             FontSize="14"
                             Padding="5,3"
                             Foreground="White"
                             Background="#1A1D25"
                             BorderBrush="#00E5FF"
                             BorderThickness="1"
                             CaretBrush="#00E5FF"
                             TextChanged="txtBuscar_TextChanged"
                             materialDesign:HintAssist.Hint="Nombre o código..."/>
                </StackPanel>

                <!-- Categoría -->
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="📦 Categoría:"
                               VerticalAlignment="Center"
                               Foreground="#E0E4EB"
                               Margin="0,0,10,0"
                               FontSize="15"/>
                    <ComboBox x:Name="cbCategorias"
                              Width="210"
                              FontSize="14"
                              Padding="4,2"
                              DisplayMemberPath="nombre"
                              SelectedValuePath="idCategoriaProducto"
                              Foreground="White"
                              Background="#1A1D25"
                              BorderBrush="#00E5FF"
                              BorderThickness="1"
                              SelectionChanged="cbCategorias_SelectionChanged"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- ======= FORMULARIO ======= -->
        <Border Grid.Row="2"
                Padding="25"
                CornerRadius="12"
                Background="#1A1C23"
                Margin="0,0,0,25"
                Effect="{DynamicResource MaterialDesignElevation3}">
            <Grid Margin="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- ===== Primera fila ===== -->
                <StackPanel Grid.Column="0" Margin="8">
                    <TextBlock Text="Código" Foreground="#9BA1B0" Margin="0,0,0,5"/>
                    <Border Background="#232630" CornerRadius="6">
                        <TextBox x:Name="txtCodigo" Background="Transparent" Foreground="White" BorderThickness="0" Padding="4"/>
                    </Border>
                </StackPanel>

                <StackPanel Grid.Column="1" Margin="8">
                    <TextBlock Text="Nombre" Foreground="#9BA1B0" Margin="0,0,0,5"/>
                    <Border Background="#232630" CornerRadius="6">
                        <TextBox x:Name="txtNombre" Background="Transparent" Foreground="White" BorderThickness="0" Padding="4"/>
                    </Border>
                </StackPanel>

                <StackPanel Grid.Column="2" Margin="8">
                    <TextBlock Text="Descripción" Foreground="#9BA1B0" Margin="0,0,0,5"/>
                    <Border Background="#232630" CornerRadius="6">
                        <TextBox x:Name="txtDescripcion" Background="Transparent" Foreground="White" BorderThickness="0" Padding="4"/>
                    </Border>
                </StackPanel>

                <!-- ===== Segunda fila ===== -->
                <StackPanel Grid.Row="1" Grid.Column="0" Margin="8">
                    <TextBlock Text="Precio Compra" Foreground="#9BA1B0" Margin="0,0,0,5"/>
                    <Border Background="#232630" CornerRadius="6">
                        <TextBox x:Name="txtPrecioCompra" Background="Transparent" Foreground="White" BorderThickness="0" Padding="4"/>
                    </Border>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.Column="1" Margin="8">
                    <TextBlock Text="Precio Venta" Foreground="#9BA1B0" Margin="0,0,0,5"/>
                    <Border Background="#232630" CornerRadius="6">
                        <TextBox x:Name="txtPrecioVenta" Background="Transparent" Foreground="White" BorderThickness="0" Padding="4"/>
                    </Border>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.Column="2" Margin="8">
                    <TextBlock Text="Stock Actual" Foreground="#9BA1B0" Margin="0,0,0,5"/>
                    <Border Background="#232630" CornerRadius="6">
                        <TextBox x:Name="txtStockActual" Background="Transparent" Foreground="White" BorderThickness="0" Padding="4"/>
                    </Border>
                </StackPanel>

                <!-- ===== Tercera fila ===== -->
                <StackPanel Grid.Row="2" Grid.Column="0" Margin="8">
                    <TextBlock Text="Stock Mínimo" Foreground="#9BA1B0" Margin="0,0,0,5"/>
                    <Border Background="#232630" CornerRadius="6">
                        <TextBox x:Name="txtStockMinimo" Background="Transparent" Foreground="White" BorderThickness="0" Padding="4"/>
                    </Border>
                </StackPanel>

                <StackPanel Grid.Row="2" Grid.Column="1" Margin="8">
                    <TextBlock Text="Categoría" Foreground="#9BA1B0" Margin="0,0,0,5"/>
                    <Border Background="#232630" CornerRadius="6">
                        <ComboBox x:Name="cbCategoriaFormulario"
                                  Background="Transparent"
                                  BorderThickness="0"
                                  Foreground="White"
                                  DisplayMemberPath="nombre"
                                  SelectedValuePath="idCategoriaProducto"
                                  Padding="4"/>
                    </Border>
                </StackPanel>

                <!-- ===== Botones ===== -->
                <StackPanel Grid.Row="3" Grid.ColumnSpan="3" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
                    <Button Content="Agregar" Width="100" Margin="8" Click="btnAgregar_Click"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Background="#4CC9F0" Foreground="White"/>
                    <Button Content="Modificar" Width="100" Margin="8" Click="btnModificar_Click"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Background="#3A86FF" Foreground="White"/>
                    <Button Content="Eliminar" Width="100" Margin="8" Click="btnEliminar_Click"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Background="#EF233C" Foreground="White"/>
                    <Button Content="Limpiar" Width="100" Margin="8" Click="btnLimpiar_Click"
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            BorderBrush="#4CC9F0" Foreground="#4CC9F0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ======= DATAGRID ======= -->
        <Border Grid.Row="3"
                CornerRadius="10"
                BorderBrush="#4CC9F0"
                BorderThickness="1"
                Background="#1A1C23"
                Padding="10">
            <DataGrid x:Name="dataGridProductos"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      IsReadOnly="True"
                      Background="#1A1C23"
                      Foreground="White"
                      GridLinesVisibility="None"
                      RowBackground="#1F2129"
                      AlternatingRowBackground="#232630"
                      BorderThickness="0"
                      FontSize="14"
                      SelectionMode="Single"
                      SelectionChanged="dataGridProductos_SelectionChanged"
                      ScrollViewer.VerticalScrollBarVisibility="Auto"
                      ScrollViewer.HorizontalScrollBarVisibility="Auto">

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Código" Binding="{Binding codigo}" Width="*"/>
                    <DataGridTextColumn Header="Nombre" Binding="{Binding nombre}" Width="*"/>
                    <DataGridTextColumn Header="Descripción" Binding="{Binding descripcion}" Width="2*"/>
                    <DataGridTextColumn Header="Compra" Binding="{Binding precioCompra}" Width="*"/>
                    <DataGridTextColumn Header="Venta" Binding="{Binding precioVenta}" Width="*"/>
                    <DataGridTextColumn Header="Stock Actual" Binding="{Binding stockActual}" Width="*"/>
                    <DataGridTextColumn Header="Stock Mínimo" Binding="{Binding stockMinimo}" Width="*"/>
                    <DataGridTextColumn Header="Categoría" Binding="{Binding idCategoriaProductoNavigation.nombre}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>
